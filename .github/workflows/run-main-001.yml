name: Run main.py on schedule

on:
  schedule:
    # every 5 minutes (UTC)
    - cron: "*/5 * * * *"
  workflow_dispatch: {}

jobs:
    build:
        env:
            PY_COLORS: "1"
            DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
        runs-on: macos-latest
        strategy:
            fail-fast: false
            max-parallel: 6
            matrix:
                python-version: ["3.9", "3.10", "3.11", "3.12", "3.13", "3.14"]


        steps:
        - uses: actions/checkout@v6
        - name: Set up Python ${{ matrix.python-version }}
          uses: actions/setup-python@v6
          with:
            python-version: ${{ matrix.python-version }}
        - name: Install dependencies
          run: |
            python -m pip install --upgrade pip
            python -m pip install --upgrade wheel
            pip install -r requirements.txt
        - name: Install SeleniumBase
          run: |
            pip install .
        - name: Check the console scripts interface
          run: |
            seleniumbase
            sbase
        - name: Install chromedriver
          run: |
            seleniumbase install chromedriver
        - name: Run main.py
          run: |
            python main.py